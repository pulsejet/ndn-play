
<ng-template #sidebarPane>
    <div id="sidebar">
        <h1 class="is-size-3">NDN-Play</h1>
        <topo-sidebar [topo]="gs.topo"></topo-sidebar>
    </div>
</ng-template>

<ng-template #mainPane>
    <ng-template #mainUpperPane>
        <app-tabs class="tab-container">
            <app-tab name="Topology">
                <div #topoContainer class="main-tab"></div>
            </app-tab>
            <app-tab name="Editor" *ngIf="gs.topo.selectedNode">
                <div class="main-tab">
                    <app-editor [(code)]="gs.topo.selectedNode.extra.codeEdit" language="javascript"></app-editor>
                </div>
            </app-tab>
            <app-tab name="Trust Schema">
                <div class="main-tab">
                    <app-editor [(code)]="gs.topo.security.schemaText" language="trust-schema"></app-editor>
                </div>
            </app-tab>
            <app-tab name="Trust Visualizer" (select)="gs.topo.security.fitLazy()">
                <div #secContainer class="main-tab"></div>
            </app-tab>
        </app-tabs>
    </ng-template>

    <ng-template #mainLowerPane>
        <app-tabs class="tab-container main-lower" #lowerTabs>
            <app-tab name="Console" (select)="console.resize()">
                <div class="console"> <console #console></console> </div>
            </app-tab>

            <app-tab name="Packet Visualizer" #lowerVisTab>
                <div class="m-2">
                    <app-visualizer [packet]="visualizedPacket"></app-visualizer>
                </div>
            </app-tab>

            <app-tab name="Packet Capture" *ngIf="gs.topo.selectedNode">
                <div class="m-2">
                    <app-captured-list
                        [node]="gs.topo.selectedNode"
                        (packetClick)="this.visualizedPacket = $event; lowerTabs.selection = lowerVisTab"
                    ></app-captured-list>
                </div>
            </app-tab>
        </app-tabs>
    </ng-template>

    <div class="full-width">
        <app-pane [pane1]="mainUpperPane" [pane2]="mainLowerPane"
                  [vertical]="true" basis="70%"
                  (resize)="$any(console).resize()">
        </app-pane>
    </div>
</ng-template>

<app-pane [pane1]="sidebarPane" [pane2]="mainPane" basis="300px"></app-pane>
